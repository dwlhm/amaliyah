{"version":3,"file":"es.weak-map.constructor-7187d608.js","sources":["../../node_modules/.pnpm/core-js@3.27.1/node_modules/core-js/internals/collection-weak.js","../../node_modules/.pnpm/core-js@3.27.1/node_modules/core-js/modules/es.weak-map.constructor.js"],"sourcesContent":["'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltIns = require('../internals/define-built-ins');\nvar getWeakData = require('../internals/internal-metadata').getWeakData;\nvar anInstance = require('../internals/an-instance');\nvar anObject = require('../internals/an-object');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar isObject = require('../internals/is-object');\nvar iterate = require('../internals/iterate');\nvar ArrayIterationModule = require('../internals/array-iteration');\nvar hasOwn = require('../internals/has-own-property');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\nvar find = ArrayIterationModule.find;\nvar findIndex = ArrayIterationModule.findIndex;\nvar splice = uncurryThis([].splice);\nvar id = 0;\n\n// fallback for uncaught frozen keys\nvar uncaughtFrozenStore = function (store) {\n  return store.frozen || (store.frozen = new UncaughtFrozenStore());\n};\n\nvar UncaughtFrozenStore = function () {\n  this.entries = [];\n};\n\nvar findUncaughtFrozen = function (store, key) {\n  return find(store.entries, function (it) {\n    return it[0] === key;\n  });\n};\n\nUncaughtFrozenStore.prototype = {\n  get: function (key) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) return entry[1];\n  },\n  has: function (key) {\n    return !!findUncaughtFrozen(this, key);\n  },\n  set: function (key, value) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) entry[1] = value;\n    else this.entries.push([key, value]);\n  },\n  'delete': function (key) {\n    var index = findIndex(this.entries, function (it) {\n      return it[0] === key;\n    });\n    if (~index) splice(this.entries, index, 1);\n    return !!~index;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var Constructor = wrapper(function (that, iterable) {\n      anInstance(that, Prototype);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        id: id++,\n        frozen: undefined\n      });\n      if (!isNullOrUndefined(iterable)) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n    });\n\n    var Prototype = Constructor.prototype;\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var data = getWeakData(anObject(key), true);\n      if (data === true) uncaughtFrozenStore(state).set(key, value);\n      else data[state.id] = value;\n      return that;\n    };\n\n    defineBuiltIns(Prototype, {\n      // `{ WeakMap, WeakSet }.prototype.delete(key)` methods\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.delete\n      // https://tc39.es/ecma262/#sec-weakset.prototype.delete\n      'delete': function (key) {\n        var state = getInternalState(this);\n        if (!isObject(key)) return false;\n        var data = getWeakData(key);\n        if (data === true) return uncaughtFrozenStore(state)['delete'](key);\n        return data && hasOwn(data, state.id) && delete data[state.id];\n      },\n      // `{ WeakMap, WeakSet }.prototype.has(key)` methods\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.has\n      // https://tc39.es/ecma262/#sec-weakset.prototype.has\n      has: function has(key) {\n        var state = getInternalState(this);\n        if (!isObject(key)) return false;\n        var data = getWeakData(key);\n        if (data === true) return uncaughtFrozenStore(state).has(key);\n        return data && hasOwn(data, state.id);\n      }\n    });\n\n    defineBuiltIns(Prototype, IS_MAP ? {\n      // `WeakMap.prototype.get(key)` method\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.get\n      get: function get(key) {\n        var state = getInternalState(this);\n        if (isObject(key)) {\n          var data = getWeakData(key);\n          if (data === true) return uncaughtFrozenStore(state).get(key);\n          return data ? data[state.id] : undefined;\n        }\n      },\n      // `WeakMap.prototype.set(key, value)` method\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.set\n      set: function set(key, value) {\n        return define(this, key, value);\n      }\n    } : {\n      // `WeakSet.prototype.add(value)` method\n      // https://tc39.es/ecma262/#sec-weakset.prototype.add\n      add: function add(value) {\n        return define(this, value, true);\n      }\n    });\n\n    return Constructor;\n  }\n};\n","'use strict';\nvar FREEZING = require('../internals/freezing');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltIns = require('../internals/define-built-ins');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar collection = require('../internals/collection');\nvar collectionWeak = require('../internals/collection-weak');\nvar isObject = require('../internals/is-object');\nvar enforceInternalState = require('../internals/internal-state').enforce;\nvar fails = require('../internals/fails');\nvar NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');\n\nvar $Object = Object;\n// eslint-disable-next-line es/no-array-isarray -- safe\nvar isArray = Array.isArray;\n// eslint-disable-next-line es/no-object-isextensible -- safe\nvar isExtensible = $Object.isExtensible;\n// eslint-disable-next-line es/no-object-isfrozen -- safe\nvar isFrozen = $Object.isFrozen;\n// eslint-disable-next-line es/no-object-issealed -- safe\nvar isSealed = $Object.isSealed;\n// eslint-disable-next-line es/no-object-freeze -- safe\nvar freeze = $Object.freeze;\n// eslint-disable-next-line es/no-object-seal -- safe\nvar seal = $Object.seal;\n\nvar FROZEN = {};\nvar SEALED = {};\nvar IS_IE11 = !global.ActiveXObject && 'ActiveXObject' in global;\nvar InternalWeakMap;\n\nvar wrapper = function (init) {\n  return function WeakMap() {\n    return init(this, arguments.length ? arguments[0] : undefined);\n  };\n};\n\n// `WeakMap` constructor\n// https://tc39.es/ecma262/#sec-weakmap-constructor\nvar $WeakMap = collection('WeakMap', wrapper, collectionWeak);\nvar WeakMapPrototype = $WeakMap.prototype;\nvar nativeSet = uncurryThis(WeakMapPrototype.set);\n\n// Chakra Edge bug: adding frozen arrays to WeakMap unfreeze them\nvar hasMSEdgeFreezingBug = function () {\n  return FREEZING && fails(function () {\n    var frozenArray = freeze([]);\n    nativeSet(new $WeakMap(), frozenArray, 1);\n    return !isFrozen(frozenArray);\n  });\n};\n\n// IE11 WeakMap frozen keys fix\n// We can't use feature detection because it crash some old IE builds\n// https://github.com/zloirock/core-js/issues/485\nif (NATIVE_WEAK_MAP) if (IS_IE11) {\n  InternalWeakMap = collectionWeak.getConstructor(wrapper, 'WeakMap', true);\n  InternalMetadataModule.enable();\n  var nativeDelete = uncurryThis(WeakMapPrototype['delete']);\n  var nativeHas = uncurryThis(WeakMapPrototype.has);\n  var nativeGet = uncurryThis(WeakMapPrototype.get);\n  defineBuiltIns(WeakMapPrototype, {\n    'delete': function (key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeDelete(this, key) || state.frozen['delete'](key);\n      } return nativeDelete(this, key);\n    },\n    has: function has(key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeHas(this, key) || state.frozen.has(key);\n      } return nativeHas(this, key);\n    },\n    get: function get(key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeHas(this, key) ? nativeGet(this, key) : state.frozen.get(key);\n      } return nativeGet(this, key);\n    },\n    set: function set(key, value) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        nativeHas(this, key) ? nativeSet(this, key, value) : state.frozen.set(key, value);\n      } else nativeSet(this, key, value);\n      return this;\n    }\n  });\n// Chakra Edge frozen keys fix\n} else if (hasMSEdgeFreezingBug()) {\n  defineBuiltIns(WeakMapPrototype, {\n    set: function set(key, value) {\n      var arrayIntegrityLevel;\n      if (isArray(key)) {\n        if (isFrozen(key)) arrayIntegrityLevel = FROZEN;\n        else if (isSealed(key)) arrayIntegrityLevel = SEALED;\n      }\n      nativeSet(this, key, value);\n      if (arrayIntegrityLevel == FROZEN) freeze(key);\n      if (arrayIntegrityLevel == SEALED) seal(key);\n      return this;\n    }\n  });\n}\n"],"names":["uncurryThis","require$$0","defineBuiltIns","require$$1","getWeakData","require$$2","anInstance","require$$3","anObject","require$$4","isNullOrUndefined","require$$5","isObject","require$$6","iterate","require$$7","ArrayIterationModule","require$$8","hasOwn","require$$9","InternalStateModule","require$$10","setInternalState","internalStateGetterFor","find","findIndex","splice","id","uncaughtFrozenStore","__name","store","UncaughtFrozenStore","findUncaughtFrozen","key","it","entry","value","index","collectionWeak","wrapper","CONSTRUCTOR_NAME","IS_MAP","ADDER","Constructor","that","iterable","Prototype","getInternalState","define","state","data","FREEZING","global","InternalMetadataModule","collection","enforceInternalState","fails","NATIVE_WEAK_MAP","$Object","isArray","isExtensible","isFrozen","isSealed","freeze","seal","FROZEN","SEALED","IS_IE11","InternalWeakMap","init","$WeakMap","WeakMapPrototype","nativeSet","hasMSEdgeFreezingBug","frozenArray","nativeDelete","nativeHas","nativeGet","arrayIntegrityLevel"],"mappings":"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"}